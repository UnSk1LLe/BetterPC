<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="./assets/css/mainStyle.css">
    <link rel="stylesheet" href="./assets/css/profileStyle.css"> <!-- Link to your main CSS file -->
</head>
<body>
<div class="container">
    <div class="tabs">
        <button class="tablinks" data-tab="personal">Personal Information</button>
        <button class="tablinks" data-tab="orders">Active Orders</button>

        <div id="personal" class="tabcontent" style="display: block">
            <h2>Personal Information</h2>
            <div class="profile-info">
                <div class="profile-image">
                    <img src="./assets/icons/userdefault.png">
                </div>
                <div class="profile-details">
                    <p>Name: <span id="name">{{.User.UserInfo.Name}}</span></p>
                    <p>Surname: <span id="surname">{{.User.UserInfo.Surname}}</span></p>
                    <p>Date Of Birth: <span id="dob">{{.User.UserInfo.Dob}}</span></p>
                    <p>Email: <span id="email">{{.User.UserInfo.Email}}</span></p>
                    <button class="edit-button" onclick="window.location.href = 'editUserInfoForm'">Edit</button>
                </div>
            </div>
        </div>

        <div id="orders" class="tabcontent">
            <h2>Active Orders</h2>
            <div class="orders-list">
                {{ if .OrdersList }}
                {{ range .OrdersList }}
                <div class="profile-details">
                    <p>Order ID: <span class="order-number">{{.ID}}</span></p>
                    <p>Date: <span class="order-date">{{.Date}}</span></p>
                    <p>Contents:
                        <span class="order-summary">
                    {{range .Items}}{{.Manufacturer}} {{.Model}}, {{end}}
                </span>
                        <button class="toggle-details" onclick="toggleDetails(this)">Show Details</button>
                    </p>
                    <div class="order-details" style="display: none;">
                        {{ range .Items }}
                        <div class="item-details" data-price="{{ .Price }}" data-amount="{{ .ItemHeader.Amount }}">
                            <div class="cpu-image">
                                <img src="assets/icons/s1.jpg" alt="Product Image">
                            </div>
                            <div class="cpu-details">
                                <h3 class="product-name">{{ .Manufacturer }} {{ .Model }}</h3>
                                <p>Amount: <span class="amount">{{ .ItemHeader.Amount }}</span></p>
                                <p>Price: <span class="total-price"></span> ₸</p>
                            </div>
                        </div>
                        {{ end }}
                    </div>
                    <p>Order Price: <span class="order-status">{{.Price}} ₸</span></p>
                    <p>Status: <span class="order-status">{{.Status}}</span></p>
                    <button class="cancel-button" onclick="confirmCancel('{{.ID}}')">Cancel</button>
                </div>
                {{ end }}
                {{ else }}
                <div class="profile-details">
                    <p>There are no active orders.</p>
                </div>
                {{ end }}
            </div>
        </div>
    </div>
</div>

<script src="./assets/js/profile.js"></script>
</body>
</html>
